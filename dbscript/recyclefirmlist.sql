CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `recyclefirmlist`  AS  select `recyclefirm`.`id` AS `id`,`recyclefirm`.`name` AS `name`,`recyclefirm`.`yomi` AS `yomi`,`recyclefirm`.`contactperson` AS `contactperson`,`recyclefirm`.`department` AS `department`,`recyclefirm`.`zip` AS `zip`,`recyclefirm`.`prefectureid` AS `prefectureid`,`recyclefirm`.`address1` AS `address1`,`recyclefirm`.`address2` AS `address2`,`recyclefirm`.`telno` AS `telno`,`recyclefirm`.`faxno` AS `faxno`,`recyclefirm`.`email` AS `email`,`recyclefirm`.`notes` AS `notes`,`recyclefirm`.`isactive` AS `isactive`,`recyclefirm`.`created_at` AS `created_at`,`recyclefirm`.`updated_at` AS `updated_at`,if(isnull(`permit`.`id`),0,1) AS `haspermit` from (`recyclefirm` left join (select distinct `permit`.`firmid` AS `id` from `permit` where (`permit`.`isactive` = 1)) `permit` on((`recyclefirm`.`id` = `permit`.`id`))) where (`recyclefirm`.`isactive` = 1) ;
